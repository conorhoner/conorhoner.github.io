<!-- QR Code Section -->
<div id="qr-code-container">
  <h3>Scan this QR code to interact with the video on your phone:</h3>
  <div id="qrcode"></div>
</div>

<script>
  const video = document.getElementById('interactive-video');
  const sessionId = 'unique-session-id'; // Use a unique ID for each session
  const socket = new WebSocket('wss://your-heroku-app.herokuapp.com'); // Replace with your live WebSocket URL

  // Generate QR Code with the GitHub Pages URL for the phone page
  const phoneUrl = 'http://conorhoner.github.io/phone.html';
  const qrcode = new QRCode(document.getElementById("qrcode"), {
    text: phoneUrl,
    width: 128,
    height: 128
  });

  socket.onopen = function() {
    socket.send(JSON.stringify({ type: 'join', sessionId: sessionId }));
  };

  socket.onmessage = function(event) {
    const data = JSON.parse(event.data);
    if (data.type === 'choice') {
      if (data.choice === 'skip') {
        video.currentTime += 30; // Example: skip 30 seconds
      }
    }
  };

  video.addEventListener('timeupdate', function() {
    if (video.currentTime >= 5 && video.currentTime <= 6) {
      video.pause();
      socket.send(JSON.stringify({ type: 'pause', sessionId: sessionId }));
    }
  });
</script>
